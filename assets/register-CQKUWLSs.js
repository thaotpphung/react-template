import{j as e,F as x,b as p,h as g,i as d,k as h,l as j,I as l,S as b,m as y,B as f,L as N,o as T,q as v,p as w,s as F,r as L}from"./index-Btb8dkF1.js";import{L as R}from"./auth-layout-ByPmvNgx.js";const I=a=>{const{label:o,options:n,error:r,className:i,defaultValue:c,registration:m}=a;return e.jsx(x,{label:o,error:r,children:e.jsx("select",{className:p("mt-1 block w-full rounded-md border-gray-600 py-2 pl-3 pr-10 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",i),defaultValue:c,...m,children:n.map(({label:s,value:t})=>e.jsx("option",{value:t,children:s},s==null?void 0:s.toString()))})})},C=({onSuccess:a,chooseTeam:o,setChooseTeam:n,teams:r})=>{const i=g({onSuccess:a}),[c]=d(),m=c.get("redirectTo");return e.jsxs("div",{children:[e.jsx(h,{onSubmit:s=>{i.mutate(s)},schema:j,options:{shouldUnregister:!0},children:({register:s,formState:t})=>e.jsxs(e.Fragment,{children:[e.jsx(l,{type:"text",label:"First Name",error:t.errors.firstName,registration:s("firstName")}),e.jsx(l,{type:"text",label:"Last Name",error:t.errors.lastName,registration:s("lastName")}),e.jsx(l,{type:"email",label:"Email Address",error:t.errors.email,registration:s("email")}),e.jsx(l,{type:"password",label:"Password",error:t.errors.password,registration:s("password")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{checked:o,onCheckedChange:n,className:`${o?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2`,id:"choose-team"}),e.jsx(y,{htmlFor:"airplane-mode",children:"Join Existing Team"})]}),o&&r?e.jsx(I,{label:"Team",error:t.errors.teamId,registration:s("teamId"),options:r==null?void 0:r.map(u=>({label:u.name,value:u.id}))}):e.jsx(l,{type:"text",label:"Team Name",error:t.errors.teamName,registration:s("teamName")}),e.jsx("div",{children:e.jsx(f,{isLoading:i.isPending,type:"submit",className:"w-full",children:"Register"})})]})}),e.jsx("div",{className:"mt-2 flex items-center justify-end",children:e.jsx("div",{className:"text-sm",children:e.jsx(N,{to:`/auth/login${m?`?redirectTo=${encodeURIComponent(m)}`:""}`,className:"font-medium text-blue-600 hover:text-blue-500",children:"Log In"})})})]})},k=()=>w.get("/teams"),q=()=>v({queryKey:["teams"],queryFn:()=>k()}),P=({queryConfig:a={}}={})=>T({...q(),...a}),S=()=>{const a=F(),[o]=d(),n=o.get("redirectTo"),[r,i]=L.useState(!1),c=P({queryConfig:{enabled:r}});return e.jsx(R,{title:"Register your account",children:e.jsx(C,{onSuccess:()=>a(`${n?`${n}`:"/app"}`,{replace:!0}),chooseTeam:r,setChooseTeam:()=>i(!r),teams:c.data})})};export{S as RegisterRoute};
